pipeline{
 agent any
  environment{
  SQLSERVER = "JAYARAM\\DEVELOPER1"
  DATABASE = "ErrorBD"
  user = "Jailogin"
  pwd = "Jayaram@300"
 }
stages{
stage("Checkout from git"){
steps{
checkout scm
}
}
stage("Insert files into sql server"){
steps {
script{
def builkinsert = """
path = 'D:\\SSISGitReport1\\Files\\*.csv'
BULK INSERT health.Population from ${path}
WITH(
FIRSTROW = 2,
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n',
TABLOCK
);
"""
def escquary = builkinsert.replace('\n',' ').trim()
echo " Executing query ${escquary}"
bat """
sqlcmd -S ${SQLSERVER} -d ${DATABASE} -U ${user} -P ${pwd} -Q "${escquary}"
"""
}
}
}
}
}







